@startuml

actor 用户输入

participant 应用程序
participant ISR
participant 串口外设
participant 用户输入

应用程序->应用程序: 初始化信号量
应用程序->应用程序: 设置接收回调函数
应用程序->应用程序: 创建数据处理线程

应用程序->应用程序: 数据处理线程阻塞等待信号量

用户输入->串口外设: 用户输入一个字符

串口外设->ISR: 串口外设接收到字符并触发串口接收中断

ISR->应用程序: ISR将数据放入缓冲区,并在接收回调函数中发送信号量激活线程

应用程序->应用程序: 数据处理线程获取到信号量被激活，并从缓冲区读取一个字符数据

@enduml