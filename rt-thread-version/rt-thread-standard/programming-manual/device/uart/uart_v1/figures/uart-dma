@startuml

actor 用户输入

participant 应用程序
participant ISR
participant DMA外设
participant 用户输入

应用程序->应用程序: 初始化消息队列
应用程序->应用程序: 设置接收回调函数
应用程序->应用程序: 创建数据处理线程

应用程序->应用程序: 数据处理线程阻塞等待消息

用户输入->DMA外设: 用户输入一批字符

DMA外设->ISR: DMA将一批字符放入缓冲区并触发中断

ISR->应用程序: 调用接收回调函数发送消息队列激活线程

应用程序->应用程序: 数据处理线程获取到消息队列被激活，并从缓冲区读取一批字符

@enduml